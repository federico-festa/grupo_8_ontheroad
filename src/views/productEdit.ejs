<!DOCTYPE html>
<html lang="en">
<base href="/" />
<%- include('partials/head', {title: 'Formulario de edición' , css: 'productEdit.css' }) %>

    <body>
        <%- include('./partials/header') %>
            <main>
                <h2 class="edit-title">Formulario de edición de producto: <%= productToEdit.name %>
                </h2>
                <div class="container">
                    <div class="form-container">
                        <form action="/products/edit/<%= productToEdit.id %>?_method=PUT" method="POST"
                            enctype="multipart/form-data">
                            <div class="row-1">
                                <div class="c-1">
                                    <div class="input-container">
                                        <label for="name" class="label-container">Lugar:</label>
                                        <br>
                                        <input type="text" id="name" name="name" placeholder="Ej: Buenos Aires"
                                            class="input" value="<%= productToEdit.name%>">
                                        <div class="errors-msg">
                                            <% if(locals.errors && errors.name) { %>
                                                <p>
                                                    <%= errors.name.msg %>
                                                </p>
                                                <% } %>
                                        </div>
                                    </div>
                                    <div class="input-container">
                                        <label for="discount" class="label-container">Descuento:</label>
                                        <br>
                                        <input type="text" id="discount" name="discount" placeholder="Ej: 15"
                                            class="input" value="<%= productToEdit.discount%>">
                                            <div class="errors-msg">
                                                <% if(locals.errors && errors.discount) { %>
                                                    <p>
                                                        <%= errors.discount.msg %>
                                                    </p>
                                                    <% } %>
                                            </div>
                                    </div>
                                    <div class="input-container">
                                        <label for="descriptionShort" class="label-container">Descipción breve:</label>
                                        <br>
                                        <textarea name="descriptionShort" id="descriptionShort" class="input"><%= productToEdit.descriptionShort%>
                                        </textarea>
                                        <div class="errors-msg">
                                            <% if(locals.errors && errors.descriptionShort) { %>
                                                <p>
                                                    <%= errors.descriptionShort.msg %>
                                                </p>
                                                <% } %>
                                        </div>
                                    </div>
                                    <div class="input-container">
                                        <label for="descriptionLong" class="label-container">Descripción
                                            completa:</label>
                                        <br>
                                        <textarea name="descriptionLong" id="descriptionLong" class="input-desc"><%= productToEdit.descriptionLong%>
                                        </textarea>
                                        <div class="errors-msg">
                                            <% if(locals.errors && errors.descriptionLong) { %>
                                                <p>
                                                    <%= errors.descriptionLong.msg %>
                                                </p>
                                                <% } %>
                                        </div>
                                    </div>
                                </div>
                                <div class="c-2">
                                    <div class="input-container">
                                        <label for="price" class="label-container">Precio:</label>
                                        <br>
                                        <input type="text" id="price" name="price" placeholder="Ej: 1500" class="input"
                                            value="<%= productToEdit.price%>">
                                            <div class="errors-msg">
                                                <% if(locals.errors && errors.price) { %>
                                                    <p>
                                                        <%= errors.price.msg %>
                                                    </p>
                                                    <% } %>
                                            </div>
                                    </div>
                                    <div class="input-container">
                                        <label for="regions_id" class="label-container">Región:</label>
                                        <br>
                                        <select name="id_region" id="id_region" class="regions_id"
                                            value="<%= productToEdit.id_region%>">
                                            <% for(let i=0; i < regions.length; i++) { %>
                                                <option value="<%= regions[i].id%>">
                                                    <%= regions[i].name %>
                                                </option>
                                                <% } %>
                                        </select>
                                        <div class="errors-msg">
                                            <% if(locals.errors && errors.id_region) { %>
                                                <p>
                                                    <%= errors.id_region.msg %>
                                                </p>
                                                <% } %>
                                        </div>
                                    </div>
                                    <div class="input-container">
                                        <label for="img" class="label-container">Imagen:</label><br>
                                        <input type="file" name="img" id="image" class="img-input"
                                            value="<%= productToEdit.img %>">
                                            <div class="errors-msg">
                                                <% if(locals.errors && errors.img) { %>
                                                    <p>
                                                        <%= errors.img.msg %>
                                                    </p>
                                                    <% } %>
                                            </div>
                                    </div>
                                </div>
                            </div>
                            <div class="button-container">
                                <button type="submit" class="submit-button">Guardar producto</button>
                                <a href="/products/delete/<%= productToEdit.id %>"><button type="button"
                                        class="submit-button">Eliminar producto</button></a>
                            </div>
                    </div>
                    </form>
                </div>
            </main>
            <%- include('./partials/footer') %>
    </body>

</html>